<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold Collector Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Load images and sounds
        const skyImage = new Image();
        skyImage.src = 'sky.jpg';

        const basketImage = new Image();
        basketImage.src = 'rocket.png';

        const goldImage = new Image();
        goldImage.src = 'rock.png';

        const bombImage = new Image();
        bombImage.src = 'bomba.jpg';

        const successImage = new Image();
        successImage.src = 'success.jpeg';

        const hitSound = new Audio('hit.mp3');

        // Set up game variables
        const basket = {
            x: canvas.width / 2 - 25,
            y: canvas.height - 50,
            width: 50,
            height: 50,
            speed: 10
        };

        const goldList = [];
        const bombList = [];

        let score = 0;
        const scoreMultiplier = { small: 1, medium: 2, large: 3 };
        let timer = 60;

        // Event listener for arrow key controls
        document.addEventListener('keydown', handleKeyPress);

        function handleKeyPress(e) {
            switch (e.key) {
                case 'ArrowLeft':
                    basket.x = Math.max(0, basket.x - basket.speed);
                    break;
                case 'ArrowRight':
                    basket.x = Math.min(canvas.width - basket.width, basket.x + basket.speed);
                    break;
                case 'ArrowUp':
                    basket.y = Math.max(0, basket.y - basket.speed);
                    break;
                case 'ArrowDown':
                    basket.y = Math.min(canvas.height - basket.height, basket.y + basket.speed);
                    break;
            }
        }

        // Main game loop
        function gameLoop() {
            // Clear the canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw background
            ctx.drawImage(skyImage, 0, 0, canvas.width, canvas.height);

            // Draw basket
            ctx.drawImage(basketImage, basket.x, basket.y, basket.width, basket.height);

            // Draw gold
            for (const gold of goldList) {
                ctx.drawImage(goldImage, gold.x, gold.y, gold.size, gold.size);
            }

            // Draw bombs
            for (const bomb of bombList) {
                ctx.drawImage(bombImage, bomb.x, bomb.y, bomb.size, bomb.size);
            }

            // Update and draw score and timer
            updateScoreAndTimer();
            ctx.font = '20px Arial';
            ctx.fillStyle = 'white';
            ctx.fillText(`Score: ${score}`, 10, 30);
            ctx.fillText(`Time: ${timer}`, canvas.width - 100, 30);

            // Move gold and bombs
            moveItems(goldList, 5);
            moveItems(bombList, 7);

            // Check for collisions
            checkCollisions();

            // Check for game over
            if (timer <= 0) {
                endGame();
            } else {
                // Continue the game loop
                requestAnimationFrame(gameLoop);
            }
        }

        function updateScoreAndTimer() {
            if (timer % 30 === 0) {
                // Add new gold every 30 frames (1 second)
                createGold();
            }

            timer--;

            // Display "Success" image for 1 second when gold is collected
            if (successImage.visible) {
                ctx.drawImage(successImage, successImage.x, successImage.y, successImage.size, successImage.size);
                successImage.visible = false;
            }
        }

        function moveItems(items, speed) {
            for (const item of items) {
                item.y += speed;
            }
        }

        function createGold() {
            const size = getRandomSize();
            const x = Math.random() * (canvas.width - size);
            const y = 0;
            goldList.push({ x, y, size });
        }

        function getRandomSize() {
            const sizes = ['small', 'medium', 'large'];
            const randomIndex = Math.floor(Math.random() * sizes.length);
            return sizes[randomIndex];
        }

        function checkCollisions() {
            // Check for collisions with gold
            for (let i = goldList.length - 1; i >= 0; i--) {
                const gold = goldList[i];
                if (
                    basket.x < gold.x + gold.size &&
                    basket.x + basket.width > gold.x &&
                    basket.y < gold.y + gold.size &&
                    basket.y + basket.height > gold.y
                ) {
                    // Gold collected
                    score += scoreMultiplier[gold.size];
                    goldList.splice(i, 1);
                    hitSound.play();
                    // Display "Success" image at the collected gold position
                    successImage.visible = true;
                    successImage.x = gold.x;
                    successImage.y = gold.y;
                    successImage.size = gold.size;
                }
            }

            // Check for collisions with bombs
            for (let i = bombList.length - 1; i >= 0; i--) {
                const bomb = bombList[i];
                if (
                    basket.x < bomb.x + bomb.size &&
                    basket.x + basket.width > bomb.x &&
                    basket.y < bomb.y + bomb.size &&
                    basket.y + basket.height > bomb.y
                ) {
                    // Bomb hit
                    score -= 10;
                    bombList.splice(i, 1);
                    hitSound.play();
                }
            }
        }

        function endGame() {
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.font = '40px Arial';
            ctx.fillStyle = 'white';
            ctx.fillText('Game Over', canvas.width / 2 - 120, canvas.height / 2 - 20);
            ctx.fillText(`Final Score: ${score}`, canvas.width / 2 - 120, canvas.height / 2 + 40);
        }

        // Start the game loop
        requestAnimationFrame(gameLoop);
    </script>
</body>
</html>
